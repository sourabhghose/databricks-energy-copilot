# AUS Energy Copilot â€” Frontend development image
#
# This image is intentionally lightweight and dev-only: it runs Vite's
# built-in dev server (hot-module replacement) rather than building a
# production bundle.  For a production frontend image, build with
# `npm run build` and serve the dist/ directory with nginx or similar.
#
# Usage (via docker-compose):
#   docker-compose up frontend
#
# Manual build + run example:
#   docker build -f Dockerfile.dev -t energy-copilot-frontend-dev .
#   docker run -p 5173:5173 \
#     -e VITE_API_BASE_URL=http://localhost:8000 \
#     -v $(pwd)/src:/app/src \
#     energy-copilot-frontend-dev

FROM node:20-slim

WORKDIR /app

# Copy package manifests and install dependencies before copying source so
# that Docker can cache the npm ci layer independently of source changes.
COPY package*.json .
RUN npm ci

# Copy the rest of the frontend source
COPY . .

EXPOSE 5173

# --host 0.0.0.0 is required so the Vite dev server accepts connections from
# outside the container (i.e. from the host machine / other containers).
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0"]
